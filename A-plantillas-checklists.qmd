# Plantillas y checklists HILL-SE

El marco HILL-SE se apoya en un conjunto de **plantillas estandarizadas** y **listas de verificaci√≥n (checklists)** que garantizan trazabilidad, coherencia documental y control de calidad en todas las fases del ciclo de desarrollo.

Este cap√≠tulo re√∫ne los formatos base recomendados para proyectos HILL-SE, listos para integrarse en repositorios (`/templates/` o `/docs/`), as√≠ como ejemplos pr√°cticos de su aplicaci√≥n.

------------------------------------------------------------------------

## ADR Template

Los **Architecture Decision Records (ADR)** documentan las decisiones t√©cnicas clave y su justificaci√≥n.\
Cada ADR debe ser breve, versionado y revisado por el Tech Lead antes de su adopci√≥n.

**Ubicaci√≥n recomendada:** `adr/ADR-###-<slug>.md`

**Plantilla oficial:**

``` markdown
# ADR-XXX ‚Äî [T√≠tulo descriptivo de la decisi√≥n]

**Estado:** Propuesto | Aceptado | Rechazado | Obsoleto  
**Fecha:** YYYY-MM-DD  
**Autor:** [Nombre del autor / Revisor]

## Contexto
Describe el problema o necesidad que origina esta decisi√≥n.  
Incluye restricciones, alternativas consideradas y motivaci√≥n de cambio.

## Decisi√≥n
Exp√≥n la decisi√≥n adoptada de forma clara, t√©cnica y concisa.

## Consecuencias
Detalla las implicaciones de la decisi√≥n: ventajas, riesgos, compatibilidad, deuda t√©cnica.

## Referencias
- Issues, PRs o commits relacionados
- Documentaci√≥n t√©cnica o normativa aplicable
```

**Ejemplo breve:**

``` markdown
# ADR-001 ‚Äî Adopci√≥n del patr√≥n Strategy en PCOP Solver

**Estado:** Aceptado  
**Fecha:** 2025-02-10  
**Autor:** Tech Lead (M. Conde)

## Contexto
Necesitamos soportar m√∫ltiples heur√≠sticas de optimizaci√≥n sin modificar la interfaz del solver principal.

## Decisi√≥n
Implementar el patr√≥n Strategy para encapsular los algoritmos (Greedy, LNS, GRASP).

## Consecuencias
+ Extensibilidad sin romper dependencias.
‚Äì Incrementa la complejidad estructural inicial.

## Referencias
- UML v1.1 (`uml/pcop_solver.mmd`)
- PR #14
```

## Pull Request Checklist (PR)

Antes de fusionar una PR, el desarrollador y el revisor deben validar que cumple los **criterios t√©cnicos, metodol√≥gicos y √©ticos** definidos por HILL-SE.

**Ubicaci√≥n recomendada:** `.github/pull_request_template.md`

``` markdown
# PR Checklist ‚Äî HILL-SE

## General
- [ ] La PR tiene un t√≠tulo descriptivo y enlaza al issue o historia de usuario.
- [ ] Se han actualizado los ADRs, UMLs y documentaci√≥n correspondiente.
- [ ] Se incluyen tests unitarios o de integraci√≥n para la nueva funcionalidad.
- [ ] Los resultados han sido revisados por un humano (principio Human-First).

## Calidad t√©cnica
- [ ] Sin errores en linters (flake8 / eslint).
- [ ] Tipado completo y correcto (mypy / TypeScript strict).
- [ ] Tests pasan en CI y la cobertura ‚â• 90 %.
- [ ] Sin vulnerabilidades (bandit, pip-audit, npm audit).
- [ ] Calidad Sonar ‚â• A.

## Seguridad y compliance
- [ ] No se han expuesto secretos ni datos sensibles.
- [ ] Los prompts, logs y datasets cumplen pol√≠ticas de privacidad.
- [ ] Se han seguido las directrices de √©tica y transparencia HILL-SE.

## Revisi√≥n
- [ ] La PR ha sido revisada por el Tech Lead o QA.
- [ ] La revisi√≥n se ha documentado en el comentario final.
```

## Definition of Ready (DoR) y Definition of Done (DoD)

HILL-SE adapta estas definiciones para incluir artefactos generativos y verificaci√≥n humana obligatoria.

### Definition of Ready (DoR)

Una historia est√° lista para desarrollo cuando:

| Criterio                                          | Verificaci√≥n |
|---------------------------------------------------|--------------|
| Requisitos funcionales y no funcionales definidos | ‚úÖ           |
| AC redactados en formato Gherkin                  | ‚úÖ           |
| UML y ADR preliminares creados                    | ‚úÖ           |
| Prompts iniciales documentados y aprobados        | ‚úÖ           |
| Plan de tests definido                            | ‚úÖ           |
| Validaci√≥n del Tech Lead                          | ‚úÖ           |

### Definition of Done (DoD)

Una historia est√° completada cuando:

| Criterio                                    | Verificaci√≥n |
|---------------------------------------------|--------------|
| Todos los tests pasan y la cobertura ‚â• 90 % | ‚úÖ           |
| Linters, tipado y seguridad sin errores     | ‚úÖ           |
| Docstrings, ADR, UML actualizados           | ‚úÖ           |
| PR revisada y aprobada por humano           | ‚úÖ           |
| Release generada con changelog y SBOM       | ‚úÖ           |

## Prompt Templates

Los prompts son artefactos versionados en `prompts/`, con metadatos de prop√≥sito, contexto y responsable.

**Plantilla oficial (`prompts/prompt_template.md`):**

``` markdown
# Prompt Template ‚Äî HILL-SE

**ID:** 001  
**Nombre:** [Nombre corto y descriptivo]  
**Versi√≥n:** 1.0  
**Prop√≥sito:** [Objetivo del prompt]  
**Contexto:** [Qu√© informaci√≥n recibe y qu√© produce]  
**Rol del LLM:** [Asistente | Redactor | Refactor | Test Advisor]  
**Revisor humano:** [Nombre]  
**Fecha aprobaci√≥n:** YYYY-MM-DD  

## Instrucci√≥n
[Texto literal del prompt]

## Ejemplo de uso
### Input
[Ejemplo de entrada de prueba]
### Output esperado
[Ejemplo resumido del resultado correcto]
```

**Ejemplo:**

``` markdown
# Prompt: UML Drafter
**Versi√≥n:** 1.1  
**Rol:** Asistente  
**Prop√≥sito:** Generar diagrama UML inicial de clases a partir de la descripci√≥n textual del m√≥dulo.  
**Revisor:** Tech Lead  
**Fecha:** 2025-02-03

## Instrucci√≥n
Genera un diagrama UML en formato Mermaid seg√∫n las clases, atributos y relaciones descritas.

## Ejemplo
### Input
‚ÄúUn m√≥dulo Solver con clases ProblemInstance, Solver y Solution.‚Äù
### Output esperado
Mermaid `classDiagram` con herencias y relaciones entre las tres clases.
```

## Ejemplos de UML y Acceptance Criteria (AC)

### Ejemplo UML ‚Äî Arquitectura modular (caso PCOP)

```{mermaid}
classDiagram
    class ProblemInstance {
        +nodes: list[int]
        +distances: list[list[float]]
        +benefits: list[float]
        +penalties: list[float]
        +budget: float
    }

    class Solver {
        <<interface>>
        +solve(instance: ProblemInstance): Solution
    }

    class GreedySolver {
        +solve(instance: ProblemInstance): Solution
    }

    class Solution {
        +route: list[int]
        +objective_value: float
    }

    ProblemInstance --> Solver
    Solver <|-- GreedySolver
    Solver --> Solution
```

### Ejemplo AC ‚Äî Criterios Gherkin

``` gherkin
Scenario: Resolver instancia PCOP v√°lida
  Given una lista de nodos, distancias y beneficios v√°lidos
  When ejecuto el solver Greedy
  Then obtengo una ruta con beneficio total > 0
  And la distancia no supera el presupuesto definido
```

## Actualizaci√≥n de plantillas y checklists con criterios de logging

La observabilidad y el logging estructurado son elementos esenciales de la trazabilidad en HILL-SE.\
Por ello, las plantillas de control y validaci√≥n se actualizan para incorporar requisitos expl√≠citos sobre la generaci√≥n, calidad y privacidad de los registros.

------------------------------------------------------------------------

### Pull Request Checklist (PR)

Cada solicitud de incorporaci√≥n de c√≥digo debe cumplir los criterios est√°ndar de calidad, seguridad y trazabilidad, ampliados ahora con los siguientes puntos relativos al logging:

| Requisito                                               | Descripci√≥n                                                                                                                     |
|:--------------------------------|:--------------------------------------|
| ‚úÖ **Se emiten logs estructurados (JSON).**             | El c√≥digo incorpora llamadas al sistema de logging siguiendo el formato acordado (niveles, campos y correlaci√≥n de artefactos). |
| ‚úÖ **No se registran PII ni secretos.**                 | Los logs han sido revisados para garantizar que no contienen datos personales, claves, tokens ni informaci√≥n sensible.          |
| ‚úÖ **Se adjuntan logs de test como artefactos del CI.** | Los resultados de las pruebas (pytest, coverage, lint, seguridad) se guardan y suben al pipeline como evidencias firmadas.      |

El cumplimiento de estos criterios forma parte del *review t√©cnico obligatorio* antes de autorizar la fusi√≥n a la rama principal.

------------------------------------------------------------------------

### Definition of Ready (DoR)

Antes de que una historia o tarea se considere *lista para desarrollo*, debe incluir la definici√≥n expl√≠cita de los eventos m√≠nimos que deber√°n registrarse durante su ejecuci√≥n.

| Criterio                                                                 | Descripci√≥n                                                                                                                                        |
|:--------------------------------|:--------------------------------------|
| üü¶ **Los criterios de aceptaci√≥n incluyen eventos m√≠nimos a registrar.** | Cada AC debe identificar los puntos clave del flujo que generar√°n logs verificables (por ejemplo, `solver.start`, `solver.end`, `error.detected`). |

De esta manera, la planificaci√≥n del logging comienza en la fase de dise√±o funcional, no como una actividad posterior.

------------------------------------------------------------------------

### Definition of Done (DoD)

Al concluir una tarea o historia, el c√≥digo se considera completado √∫nicamente si cumple los requisitos de verificaci√≥n, calidad y observabilidad definidos.

| Criterio                                                   | Descripci√≥n                                                                                                                                                                     |
|:--------------------------------|:--------------------------------------|
| üü© **Los tests de logging pasan y no hay alertas de PII.** | Las pruebas autom√°ticas verifican que los eventos m√≠nimos se emiten correctamente (`caplog`, `pytest` o equivalente) y que los detectores de secretos o PII no generan alertas. |

Este criterio garantiza que el sistema es tanto funcional como auditable, alineado con los principios de trazabilidad y responsabilidad de HILL-SE.

------------------------------------------------------------------------

### Prompt Template (actualizaci√≥n)

El uso de modelos de lenguaje dentro del ciclo HILL-SE exige que cada *prompt* o plantilla de interacci√≥n defina su pol√≠tica de registro.\
Se a√±ade un nuevo campo para documentar qu√© informaci√≥n se registra y c√≥mo se protege:

``` markdown
---
prompt_id: PROMPT-XXX
objetivo: Describir la tarea o generaci√≥n esperada.
contexto: Incluir referencias a artefactos (AC, m√≥dulo, test).
pol√≠tica_de_logging:
  qu√©_registrar: ["prompt_id", "modelo", "tokens_input", "tokens_output", "reviewer"]
  saneado: "aplicar redacci√≥n de PII, truncar respuestas largas, anonimizar IDs"
---
```

Este bloque asegura que los registros de interacci√≥n con LLMs son **trazables, auditables y conformes con las pol√≠ticas de privacidad** del proyecto.

En conjunto, estas actualizaciones convierten las plantillas de HILL-SE en instrumentos de control de calidad integrales, donde la observabilidad y la protecci√≥n de datos forman parte expl√≠cita de la definici√≥n de ‚Äútrabajo terminado‚Äù.

## Conclusi√≥n

Las plantillas y checklists HILL-SE son el **esqueleto documental del m√©todo**:\
garantizan que cada artefacto, decisi√≥n y generaci√≥n del LLM sea **verificable, trazable y aprobada por humanos**.\
Su aplicaci√≥n sistem√°tica permite mantener la coherencia metodol√≥gica y asegurar la calidad de extremo a extremo en proyectos h√≠bridos humano-IA.